# =============================================================================
# SelfVault - Local Storage Provider Configuration
# =============================================================================
# Use this template for local development or small-scale deployments
# Files are stored directly on the filesystem
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (REQUIRED)
# -----------------------------------------------------------------------------
# Local SQLite (simplest for development)
DATABASE_URL="file:./dev.db"
DIRECT_URL="file:./dev.db"

# Or use local PostgreSQL (recommended for production-like testing)
# DATABASE_URL="postgresql://selfvault:password@localhost:5432/selfvault"
# DIRECT_URL="postgresql://selfvault:password@localhost:5432/selfvault"

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
PORT=8080
NODE_ENV=development
# For development, a simple secret is fine
JWT_SECRET=dev-jwt-secret-change-in-production

# -----------------------------------------------------------------------------
# Storage Configuration (REQUIRED)
# -----------------------------------------------------------------------------
STORAGE_PROVIDER=local

# Local Storage Settings
# Absolute path where files will be stored
LOCAL_STORAGE_PATH=/path/to/selfvault/data/uploads
# Or relative to backend directory:
# LOCAL_STORAGE_PATH=./data/uploads

# Base URL for serving files (used for download URLs)
LOCAL_STORAGE_BASE_URL=http://localhost:8080/api/files

# -----------------------------------------------------------------------------
# Supabase Auth (REQUIRED for authentication)
# -----------------------------------------------------------------------------
# Even with local storage, you still need Supabase for authentication
# Create a free project at https://supabase.com
# Or implement your own auth endpoints (see issue #9)
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_KEY=your-supabase-service-role-key

# -----------------------------------------------------------------------------
# Upload Limits
# -----------------------------------------------------------------------------
# 50MB max upload size (good for local dev)
MAX_UPLOAD_SIZE_BYTES=52428800
# 1GB max storage per user (adjust as needed)
MAX_STORAGE_PER_USER_BYTES=1073741824

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# For local development
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173

# -----------------------------------------------------------------------------
# Rate Limiting (relaxed for development)
# -----------------------------------------------------------------------------
# 15 minutes window
RATE_LIMIT_WINDOW_MS=900000
# Higher limit for testing
RATE_LIMIT_MAX_REQUESTS=1000

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
